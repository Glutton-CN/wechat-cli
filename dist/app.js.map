{"version":3,"sources":["app.js"],"names":["App","onShow","options","console","log","onLaunch","logs","wx","getStorageSync","unshift","Date","now","setStorageSync","login","success","getSetting","res","authSetting","getUserInfo","globalData","userInfo","userInfoReadyCallback"],"mappings":";;AAAA;AACAA,IAAI;AACFC,UAAQ,gBAAUC,OAAV,EAAmB;AACzBC,YAAQC,GAAR,CAAY,SAAZ,EAAuBF,OAAvB;AACD,GAHC;AAIFG,YAAU,oBAAY;AAAA;;AACpB;AACA,QAAIC,OAAOC,GAAGC,cAAH,CAAkB,MAAlB,KAA6B,EAAxC;AACAF,SAAKG,OAAL,CAAaC,KAAKC,GAAL,EAAb;AACAJ,OAAGK,cAAH,CAAkB,MAAlB,EAA0BN,IAA1B;;AAEA;AACAC,OAAGM,KAAH,CAAS;AACPC,eAAS,sBAAO;AACd;AACD;AAHM,KAAT;AAKA;AACAP,OAAGQ,UAAH,CAAc;AACZD,eAAS,sBAAO;AACd,YAAIE,IAAIC,WAAJ,CAAgB,gBAAhB,CAAJ,EAAuC;AACrC;AACAV,aAAGW,WAAH,CAAe;AACbJ,qBAAS,sBAAO;AACd;AACA,oBAAKK,UAAL,CAAgBC,QAAhB,GAA2BJ,IAAII,QAA/B;;AAEA;AACA;AACA,kBAAI,MAAKC,qBAAT,EAAgC;AAC9B,sBAAKA,qBAAL,CAA2BL,GAA3B;AACD;AACF;AAVY,WAAf;AAYD;AACF;AAjBW,KAAd;AAmBD,GApCC;AAqCFG,cAAY;AACVC,cAAU;AADA;AArCV,CAAJ","file":"app.js","sourcesContent":["//app.js\nApp({\n  onShow: function (options) {\n    console.log('options', options)\n  },\n  onLaunch: function () {\n    // 展示本地存储能力\n    var logs = wx.getStorageSync('logs') || []\n    logs.unshift(Date.now())\n    wx.setStorageSync('logs', logs)\n\n    // 登录\n    wx.login({\n      success: res => {\n        // 发送 res.code 到后台换取 openId, sessionKey, unionId\n      }\n    })\n    // 获取用户信息\n    wx.getSetting({\n      success: res => {\n        if (res.authSetting['scope.userInfo']) {\n          // 已经授权，可以直接调用 getUserInfo 获取头像昵称，不会弹框\n          wx.getUserInfo({\n            success: res => {\n              // 可以将 res 发送给后台解码出 unionId\n              this.globalData.userInfo = res.userInfo\n\n              // 由于 getUserInfo 是网络请求，可能会在 Page.onLoad 之后才返回\n              // 所以此处加入 callback 以防止这种情况\n              if (this.userInfoReadyCallback) {\n                this.userInfoReadyCallback(res)\n              }\n            }\n          })\n        }\n      }\n    })\n  },\n  globalData: {\n    userInfo: null\n  }\n})\n"]}